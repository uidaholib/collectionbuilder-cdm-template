---
# generate time-focused json data suitable for TimelineJS
---
{%- assign items = site.data[site.metadata] | where_exp: 'item','item.score contains "W"' -%}
{
    "title": {
        "media": {
          "url": "https://digital.lib.uidaho.edu/digital/iiif/football/51/full/pct:30/0/default.jpg",
          "caption": "Idaho v. Air Force Cover from our <a target='_blank' href='https://www.lib.uidaho.edu/digital/footballcovers/items/footballcovers51.html'>Idaho Vandals Football Program Covers Collection</a>",
          "credit": {{ site.title | jsonify }}
        },
        "text": {
          "headline": "Vandals Win!",
          "text": "This timeline features only those videos that depict Vandal Victories."
        }
    },
    "events": [
      {% for item in items %}{% if item.date and item.objectid != 'vandalvideo30' %}{
        "media": {
          "url": "{% if item.format contains 'image' %}{% include image/medium.html %}{% elsif item.youtubeid %}{% include image/youtube-large.html %}{% else %}{% include image/thumb.html %}{% endif %}",
          "caption": {{ item.title | jsonify }},
          "link": "{% include item-link.html %}",
          "credit": "{{ site.title }}"
        },
        "start_date": { {% if item.date contains '-' %}{% assign dates = item.date | split: '-' %}
          "month": "{{ dates[1] }}",
          "day": "{{ dates[2] }}",
          "year": "{{ dates[0] }}"{% elsif item.date contains '/' %}"year": "{{ item.date | strip | split: '/' | last }}"{% else %}
          "year": "{{ item.date }}"{% endif %}
        },
        "text": {
          "headline": "Vandals Beat {{ item.opponent }} <br >{{ item.score}}!"{% if item.description %},
          "text": {{ item.description | jsonify }}{% endif %}
        }
      }{% unless forloop.last %},{% endunless %}{% endif %}{% endfor %}
    ]
}
